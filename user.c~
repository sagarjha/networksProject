#include <stdlib.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <sys/types.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <stdio.h>
#include <string.h>
#include "mddriver.c"

int main(int argc, char* argv[])
{
  int n = 7, i=0;
  int rem = 0;
  if(argc != 3)
    {
      printf("Usage: <executable> <0 for send, 1 for retrieve> <filename>\n");
      return -1;
    }

  int option = atoi(argv[1]);
  char* fileName = argv[2];
  //MDFile(fileName);
  unsigned char MD5sum[16];
  MDFile(fileName, MD5sum);
  for (i = 0; i < 16; i++) {
    int num = MD5sum[i];
    rem = ((rem*16) + (num/16))%n;
    rem = ((rem*16) + (num%16))%n;
  }
  printf("%d\n",rem);

  return 0;
}

